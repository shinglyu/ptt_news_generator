webpackJsonp([13,32],{50:function(e,t,n){/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
function r(){for(var e,t="",n=0;n<arguments.length;n++)if(e=arguments[n])if("string"==typeof e||"number"==typeof e)t+=" "+e;else if("[object Array]"===Object.prototype.toString.call(e))t+=" "+r.apply(null,e);else if("object"==typeof e)for(var a in e)e.hasOwnProperty(a)&&e[a]&&(t+=" "+a);return t.substr(1)}var a,i;"undefined"!=typeof e&&e.exports&&(e.exports=r),a=[],i=function(){return r}.apply(t,a),!(void 0!==i&&(e.exports=i))},207:function(e,t,n){function r(e){return a.inspect(e,{showHidden:!0,depth:null})}var a=n(49),i={1:"log",2:"fatal",3:"error",4:"warn",5:"info",6:"debug",7:"trace"};e.exports=function(e,t,n,s,o){var c=i[t],l=(new Error).stack.split("\n").splice(2,Number.MAX_VALUE).join("\n"),u="";return e&&c&&e[c]?(s=a.isArray(s)?s.join("\n"):s,u="at "+n+"\n=====START=====\nERROR MESSAGE: \n"+r(s)+"\nCONTEXT: \n"+r(o)+"\nTRACING STACK: \n"+l+"\n=====END=====\n",void e[c](u)):void e.warn("Logger receive invalide arguments")}},608:function(e,t,n){"use strict";var r=n(4)("WeatherV2:Stores:WeatherStore"),a=n(40),i=n(16),s=a({storeName:"WeatherStore",statics:{handlers:{FETCH_WEATHER_SUCCESS:"_fetchWeather"}},initialize:function(){this.state={weather:{},currentLocation:null,background:0}},_fetchWeather:function(e){r("_fetchWeather",e),e&&(this.state.weather=e.weather,this.state.currentLocation=i(e,["weather","forecast","woeid"],null),this.state.background=e.background,this.emitChange())},isWeatherLoaded:function(){r(this.state.weather),r("isWeatherLoaded",this.state.weather!=={}?!0:!1);var e=i(this.state,["weather","forecast"],null);return e?!0:!1},getWeather:function(){return r("getWeather",this.state.weather),this.state.weather},getCurrentLocation:function(){return r("getCurrentLocation",this.state.currentLocation),this.state.currentLocation},getBackground:function(){return r("getBackground",this.state.background),this.state.background},dehydrate:function(){return this.state},rehydrate:function(e){this.state=e}});e.exports=s},689:function(e,t,n){"use strict";var r=n(4)("Header:HeaderStore"),a=n(121).createImmutableStore,i=n(20),s=a({storeName:"HeaderStore",statics:{handlers:{UPDATE_HEADER_SEARCH:"_toggleHeader",UPDATE_BACKURL:"_updateBackUrl",OPEN_HEADER_SUCCESS:"_getMiniHomeUrl"}},initialize:function(){var e={routeInfo:{miniHomeUrl:null,backUrl:null,propertyName:null},ui:{showHeaderComponent:!0}};this._state=i.fromJS(e)},_toggleHeader:function(e){r("_toggleHeader",e),void 0!==e.showHeaderComponent&&this.setState(this._state.setIn(["ui","showHeaderComponent"],e.showHeaderComponent))},_updateBackUrl:function(e){r("_updateBackUrl",e),e&&e.backUrl&&this.setState(this._state.setIn(["routeInfo","backUrl"],e.backUrl))},_getMiniHomeUrl:function(){var e,t,n=this.dispatcher.getStore("PageStore"),a=n.getCurrentRoute()||{params:{},config:{}},i=a.params.site||a.config.site,s=a.config.miniHome||i,o=i||a.name,c=i&&!this._state.getIn(["routeInfo","backUrl"]);s&&(t="home"===s?"/":"/"+s),e=this._state.getIn(["routeInfo","miniHomeUrl"]),c&&(e=t);var l={routeInfo:{backUrl:e||"/",propertyName:o||"home",miniHomeUrl:t||"/"},ui:{showHeaderComponent:!0}};this.setState(this._state.merge(l)),r("header gets new route",this._state.get("routeInfo").toJS())},getRouteInfo:function(){return r("getRouteInfo",this._state.get("routeInfo").toJS()),this._state.get("routeInfo").toJS()},getState:function(){return r("getState",this._state.toJS()),this._state}});e.exports=s},818:function(e,t,n){"use strict";var r=n(4)("WeatherV2:fetchWeather"),a=n(207);e.exports=function(e,t,n){r("about to fetch weather data");var i="weathers",s=e.session.dimensions.region,o={woeid:t.currentLocation,region:"TW"===s||"HK"===s?s:"TW",background:(e.query?e.query.background:t.background)||0};t.currentLocation||delete o.woeid,e.service.read(i,o,{},function(t,i){return t||!i?(a(e.logger,3,"[Weather.fetchWeather.service.read]",t||{error:"No data return."},e.session.dimensions),e.dispatch("FETCH_WEATHER_FAILURE",t),void(n&&n(t))):(r(i),e.dispatch("FETCH_WEATHER_SUCCESS",{weather:i,background:o.background}),void(n&&n()))})}},835:function(e,t,n){"use strict";var r=n(4)("HeaderV2:updateHeaderSearch");e.exports=function(e,t,n){t=t||{},r("updateHeaderSearch",t),e.dispatch("UPDATE_HEADER_SEARCH",t),n()}},1166:function(e,t,n){"use strict";var r=n(818),a=n(4)("HeaderV2:Actions:openHeader"),i=n(608);e.exports=function(e,t,n){var s=t.componentProps.componentConfig.toJS()||{},o=s.rightNavList||"",c=!1;if(a("header componentConfig: ",s),o=o.split(","),o.map(function(e){"weatherInfo"===e&&(c=!0)}),c){var l=e.getStore(i).isWeatherLoaded();a("isWeatherLoaded",l),l||e.executeAction(r,s)}return e.dispatch("OPEN_HEADER_SUCCESS"),n&&n()}},1167:function(e,t,n){e.exports={controllerViews:{Header:n(1246)},stores:{HeaderStore:n(689),WeatherStore:n(608)}}},1246:function(e,t,n){"use strict";var r=n(1),a=n(22),i=n(9),s=n(121).ComponentMixin,o=n(1166),c=n(689),l=n(608),u=n(50),p=n(4)("Header:components:Header.jsx"),d=n(16),h=n(1255),m=n(1254),f=n(1249),g=n(1257),v=n(1258),y=n(1250),w=n(1247),b=n(1248),x=n(1253),C=n(1251),_=n(1256),M=n(1252),S=r.createClass({displayName:"Header",mixins:[a,i,s],statics:{initializeAction:o,storeListeners:[l,c],componentConfig:{name:"componentHeader"},ignoreImmutableCheck:{props:{messages:!0,locales:!0,i13n:!0},state:{weatherInfo:!0}}},contextTypes:{session:r.PropTypes.object},getStateOnChange:function(){var e=this.getStore(c).getState();return{routeInfo:e.get("routeInfo")||null,weatherInfo:this.getStore(l).getWeather()||null,ui:e.get("ui")}},componentDidUpdate:function(){var e=this.getDOMNode();e&&this.setState({ui:this.state.ui.set("placeholderHeight",e.clientHeight)})},render:function(){if(p("HeaderRender!!"),!this.props.componentConfig.toJS())return null;var e=this.props.componentConfig.toJS(),t=this.state.routeInfo.toJS(),n=d(this.context,["session","dimensions","bucket"],""),a="507"===n||"509"===n?null:d(e,["ui","backgroundColorClass"],"hc-Bgc-p"),i=this.state.weatherInfo,s=e.iconData||{},o=d(e,["ui","tableLayout"],!1),c=d(e,["ui","fixedTop"],!1),l=d(e,["ui","placeholderHeight"],0),h=this.state.ui.get("placeholderHeight",l),m=this.state.ui.toJS(),f=u(a,{"Z-3 Py-8 W-100":!0,GridTable:o,Grid:!o,"Pos-r":!c,"Z-10 T-0 Start-0":c,"Pos-f":"507"!==n&&"509"!==n&&c}),g=u(e.leftNavClassName,{"GridTable-Cell":o,"Grid-U-1-3":!o}),v=u(e.centerNavClassName,{"GridTable-Cell":o,"Grid-U-1-3":!o}),y=u(e.rightNavClassName,{"GridTable-Cell":o,"Grid-U-1-3":!o}),w="507"!==n&&"509"!==n?r.createElement("div",null,r.createElement("div",{className:"Pos(f) Bgc(#400090) Z(1) W(100%)",style:{height:h}}),r.createElement("div",{style:{height:h}})):null;return t.backUrl=e.backUrl||t.backUrl,m&&m.showHeaderComponent?r.createElement("div",{id:this.props.id},r.createElement("div",{id:"Header",className:f},r.createElement(T,{iconData:s,navList:e.leftNavList,className:g,routeInfo:t}),r.createElement(T,{iconData:s,navList:e.centerNavList,className:v,routeInfo:t}),r.createElement(T,{iconData:s,navList:e.rightNavList,className:y,routeInfo:t,weatherInfo:i})),c?w:null):null}}),T=r.createClass({displayName:"Nav",render:function(){var e,t="",n=this.props.weatherInfo,a=this.props.routeInfo;return this.props.navList&&(e=this.props.navList.split(","),t=e.map(function(e,t){return r.createElement(E,{iconData:this.props.iconData,iconName:e,routeInfo:a,weatherInfo:n,key:t})},this)),r.createElement("div",{className:this.props.className},t)}}),E=r.createClass({displayName:"Icon",fetchIconConfig:function(){var e=this.props.iconName,t=d(this.props,["iconData",e],{}),n=null;return t&&"object"==typeof t&&(n=t),n},render:function(){var e=this.props.routeInfo||{},t=e.backUrl,n=this.fetchIconConfig(),a=d(n,["className"],""),i=this.props.iconName,s=e.propertyName,o=this.props.weatherInfo;switch(a="Header-"+i+" "+a,i){case"avatarIcon":return r.createElement(b,{config:n,className:a});case"auctionCartIcon":return r.createElement(w,{config:n,className:a});case"backIcon":return r.createElement(f,{config:n,backUrl:t,className:a});case"closeIcon":return r.createElement(y,{className:a});case"siteMapIcon":return r.createElement(h,{config:n,className:a});case"yLogo":return r.createElement(g,{config:n,className:a});case"yLogoFS":return r.createElement(v,{config:n});case"auctionIcon":return r.createElement(C,{config:n,className:a});case"shoppingIcon":return r.createElement(C,{config:n,className:a});case"mallIcon":return r.createElement(C,{config:n,className:a});case"dealIcon":return r.createElement(C,{config:n,className:a,ownBubble:!0});case"searchIcon":return r.createElement(m,{config:n,className:a});case"propertyName":return r.createElement(x,{config:n,propertyName:s,className:a});case"weatherInfo":return r.createElement(_,{config:n,weatherInfo:o,className:a});case"moreInfo":return r.createElement(M,{config:n,className:a});default:return r.createElement("span",null)}}});e.exports=S},1247:function(e,t,n){"use strict";var r=n(1),a=n(37).RapidMixin,i=n(73).NavLink,s={auctionCart:{routeName:"auctionCart"}},o=r.createClass({displayName:"AuctionCartIcon",getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"auctionCart",rspns:"op",t1:"a1",t2:"hd",t3:"ec",elm:"itm",elmt:"nav",itc:1}}},getInitialState:function(){return this.ylk=a.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e=s.auctionCart.routeName;return r.createElement(i,{className:"link-button rapidnofollow",routeName:e,"data-ylk":this.ylk},r.createElement("div",{className:"D-i Cur-p Va-m C-gray-dark Header-Mend-5"},r.createElement("div",{className:"Fl-end Ta-c Px-6"},r.createElement("div",{className:"Icon IconAuction D-i Fz-2xl Fw-b"}))))}});e.exports=o},1248:function(e,t,n){"use strict";var r=n(1),a=n(37).RapidMixin,i=n(73).NavLink,s={auctionProfile:{routeName:"auctionProfile"}},o=r.createClass({displayName:"AvatarIcon",getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"avatar",rspns:"op",t1:"a1",t2:"hd",t3:"ec",elm:"itm",elmt:"nav",itc:1}}},getInitialState:function(){return this.ylk=a.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e=s.auctionProfile.routeName;return r.createElement(i,{className:"link-button rapidnofollow",routeName:e,"data-ylk":this.ylk},r.createElement("div",{className:"D-i Cur-p Va-m C-gray-dark Header-Mend-5"},r.createElement("div",{className:"Fl-end Ta-c Px-6"},r.createElement("div",{className:"Icon IconAvatar D-i Fz-2xl Fw-b"}))))}});e.exports=o},1249:function(e,t,n){"use strict";var r=n(50),a=n(4)("HeaderV2:HeaderJSX"),i=n(73).NavLink,s=n(1),o=n(37).RapidMixin;e.exports=s.createClass({displayName:"exports",getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"logo",rspns:"nav",t1:"a1",t2:"hd",elm:"btn",elmt:"back",itc:0}}},getInitialState:function(){return this.ylk=o.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e=this.props.className,t=this.props.config,n=t.url||this.props.backUrl||"/",o=r(e,"Pstart-10 Pend-14 Py-8 Td-n D-i Fz-l Va-m Lh-1 rapidnofollow");return a("config.url: ",t.url),a("this.props.backUrl: ",this.props.backUrl),s.createElement(i,{className:o,href:n,"data-ylk":this.ylk},s.createElement("i",{className:"Icon IconPrevious D-i Lh-1"}))},back:function(e){""===e.target.parentElement.getAttribute("href")&&(window.history&&window.history.back?(a("window.history.back"),window.history.back()):(a("window.location.href"),window.location.href="/"),e.preventDefault())}})},1250:function(e,t,n){"use strict";var r=n(1),a=n(50);e.exports=r.createClass({displayName:"exports",closeWindow:function(){window&&window.close()},render:function(){var e=this.props.className,t=a(e,"C-w Px-10 Py-10 Td-n D-i rapidnofollow Fz-l Lh-1 Va-m");return r.createElement("a",{className:t,href:"javascript:void(0);",onClick:this.closeWindow},r.createElement("i",{className:"Icon IconClose D-i Lh-1"}))}})},1251:function(e,t,n){"use strict";var r=n(50),a=n(1),i=n(37).RapidMixin,s=n(16),o=n(533);e.exports=a.createClass({displayName:"exports",getDefaultProps:function(){return{i13nKeys:{sec:"hd",rspns:"nav",t1:"a1",t2:"hd",t3:"ec",elm:"itm",elmt:"pty",itc:0}}},getInitialState:function(){return this.ylk=i.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{showBubble:!1}},componentDidMount:function(){o&&this.isTimestampExpired()&&this.setState({showBubble:!0})},isTimestampExpired:function(){var e=Date.now(),t=o.getItem("BubbleTimestamp")||0;return t=new Date(t),e>t},handleDealClick:function(){this.deepLink(),this.props.ownBubble&&this.handleBubbleClick()},deepLink:function(){var e=s(this.props,["config","deepLink"]);if(e)if(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)){if(/(CriOS)/i.test(navigator.userAgent))return;var t=document.createElement("iframe");t.setAttribute("src",e),t.setAttribute("width","1px"),t.setAttribute("height","1px"),t.setAttribute("position","absolute"),t.setAttribute("top","0"),t.setAttribute("left","0"),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}else if(/(Chrome)/i.test(navigator.userAgent)){var n=navigator.userAgent.match(/Chrome\/([\d]+)/),r=parseInt(n&&n[1]);if(40>r)return;window.location=e}},handleBubbleClick:function(){if(this.isTimestampExpired()){var e=new Date,t=new Date;t.setDate(e.getDate()+1),t.setHours(10),t.setMinutes(30),t.setSeconds(0),o.setItem("BubbleTimestamp",t)}},render:function(){var e,t=this.props.className,n=this.props.config,i=r(t,"D-i");return this.props.ownBubble&&this.state.showBubble&&(e=a.createElement("span",{className:"Ta-c Lh-14 Wpx-14 Pos-a bubble"},"N")),a.createElement("div",{className:i},a.createElement("a",{className:"D-ib Px-8 Pt-1 Header-Mend-5 Ta-c",key:n.iconName,href:n.url,"data-ylk":this.ylk,onClick:this.handleDealClick},e,a.createElement("div",{className:n.iconName+" Fz-xl C-w D-i Lh-1"}),a.createElement("div",{className:"C-w Fz-xs Mt-4 Ta-c"},n.title)))}})},1252:function(e,t,n){"use strict";var r=n(50),a=n(1),i=n(73).NavLink;e.exports=a.createClass({displayName:"exports",contextTypes:{getStore:a.PropTypes.func},render:function(){var e=this.context.getStore("HeaderStore").getRouteInfo(),t="moreinfo"===e.propertyName,n=r(this.props.className,"D-i"),s=r({"D-ib Px-6 Mx-6 Ta-c rapidnofollow moreinfo":!0,"moreinfo-expanded":t}),o=t?"/":"/moreinfo";return a.createElement("div",{className:n},a.createElement(i,{className:s,href:o},a.createElement("div",{className:"Pos-r D-ib Cur-p"},a.createElement("div",{className:"Fl-end Ta-c My-8 Lh-07"},a.createElement("div",{className:"Icon IconDoubleArrow Fz-xl C-w Lh-1"})))))}})},1253:function(e,t,n){"use strict";var r=n(50),a=n(73).NavLink,i=n(1),s=n(9),o=n(37).RapidMixin;e.exports=i.createClass({displayName:"exports",mixins:[s],getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"logo",rspns:"nav",t1:"a1",t2:"hd",elm:"img",elmt:"logo",itc:0}}},getInitialState:function(){return this.ylk=o.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e,t=this.props.className,n=this.props.config,s=n.title||this.props.propertyName,o=r(t,"Ta-c Fz-l Td-n rapidnofollow");return s?(e=n.url||("home"===s?"/":"/"+s),i.createElement(a,{className:o,href:e,"data-ylk":this.ylk},this.getIntlMessage(s.toUpperCase()))):null}})},1254:function(e,t,n){"use strict";var r=n(50),a=n(9),i=n(1),s=n(835);e.exports=i.createClass({displayName:"exports",mixins:[a],contextTypes:{executeAction:i.PropTypes.func.isRequired},handleSearchIconClick:function(){this.context.executeAction(s,{showHeaderComponent:!1,showSearchComponent:!0,isSearchBoxFocused:!0})},render:function(){var e=this.props.className,t=r(e,"Bd(0) H(40px) M(a) Pstart(10px) Pend(16px) Pos(r) Bg(n) C(#fff) Ta(e) Cur(p) D(i) Fz(18px) Fw(b) Lh(1)");return i.createElement("button",{className:t,onClick:this.handleSearchIconClick},i.createElement("i",{className:"Icon IconSearch D-i Lh-1"}),i.createElement("span",{className:"Hidden Fz-s Fw-n"},this.getIntlMessage("SEARCH_HINT")))}})},1255:function(e,t,n){"use strict";var r=n(50),a=n(73).NavLink,i=n(1),s=n(37).RapidMixin;e.exports=i.createClass({displayName:"exports",getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"menu",rspns:"op",t1:"a1",t2:"hd",t3:"mu",elm:"tl",elmt:"op",itc:1}}},getInitialState:function(){return this.ylk=s.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e=this.props.className,t=r(e,"Va-m Mstart-10 Mend-16 Fz-l Lh-1 C-w Td-n rapidnofollow");return i.createElement(a,{className:t,href:"/sitemap","data-ylk":this.ylk},i.createElement("i",{className:"Icon IconNavigation D-i Lh-1 D-i"}))}})},1256:function(e,t,n){"use strict";var r=n(50),a=n(16),i=n(73).NavLink,s=n(1),o=n(37).RapidMixin,c=s.createClass({displayName:"WeatherInfo",getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"WeatherUtilOpen",rspns:"op",t1:"a1",t2:"hd",t3:"we",elm:"tl",elmt:"op",itc:1}}},getInitialState:function(){return this.ylk=o.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e,t,n=this.props.className,o=this.props.config,c=r(n,"rapidnofollow");return e=a(this.props,["weatherInfo","forecast"],null),t=a(this.props,["weatherInfo","warning"],{}),e?e.current_observation?s.createElement(i,{href:o.url,className:c,"data-ylk":this.ylk},s.createElement("div",{className:"D-ib Cur-p Px-6 Header-Mend-5"},s.createElement("div",{className:"Ta-c"},s.createElement("div",{className:o.sprite+" shortcut-icon w"+e.current_observation.weatherIcon}),s.createElement("span",{className:"D-i Pos-r B-0 C-w"},e.current_observation.temperature_c,"°"))),s.createElement(l,{warning:t,config:o})):s.createElement("span",null):null}}),l=s.createClass({displayName:"WarningBtn",render:function(){var e=this.props.config,t=(this.props.warning.alerts||[]).slice(0,2),n=t.map(function(t,n){return s.createElement("div",{className:e.sprite+" Weather-W-"+t.code+" shortcut-icon D-ib",key:n})});return this.props.warning.alerts?s.createElement("div",{className:"Pos-r D-ib Cur-p Header-Mend-5 header-warning-btn"},s.createElement("div",{className:"Fl-end Ta-c Header-Bdrs-5 Lh-07 My-8 Bgc-w"},n)):s.createElement("span",null)}});e.exports=c},1257:function(e,t,n){"use strict";var r=n(50),a=n(1),i=n(9),s=n(37).RapidMixin;e.exports=a.createClass({displayName:"exports",mixins:[i],getDefaultProps:function(){return{i13nKeys:{sec:"hd",slk:"logo",rspns:"nav",t1:"a1",t2:"hd",t3:"logo",elm:"img",elmt:"logo",itc:0}}},getInitialState:function(){return this.ylk=s.getRapidDataAttr(this.props.i13nKeys,"data-ylk"),{}},render:function(){var e=this.props.className,t=this.props.config,n=r(e,"Va-m D-ib rapidnofollow");return a.createElement("a",{className:n,href:"/","data-ylk":this.ylk},a.createElement("div",{className:"TextHidden "+t.iconName+" ylogo Ov-h T-0 M-0"},this.getIntlMessage("YAHOO")))}})},1258:function(e,t,n){"use strict";var r=n(1),a=n(9);e.exports=r.createClass({displayName:"exports",mixins:[a],render:function(){var e=this.props.config;return r.createElement("div",{className:"TextHidden "+e.iconName+" ylogo Ov-h T-0 Mx-10"},this.getIntlMessage("YAHOO"))}})}});